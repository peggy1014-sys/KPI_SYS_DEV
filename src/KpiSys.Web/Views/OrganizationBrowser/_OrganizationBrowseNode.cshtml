@model KpiSys.Web.Models.OrganizationTreeNodeViewModel
@{
    var hasChildren = Model.Children.Any() || Model.Employees.Any();
}
<li class="mb-2">
    <div class="d-flex align-items-start">
        @if (hasChildren)
        {
            <button type="button" class="btn btn-sm btn-link text-decoration-none toggle me-2">‚ñ∏</button>
        }
        else
        {
            <span class="me-3 text-muted">‚Ä¢</span>
        }
        <div class="flex-grow-1">
            <div class="fw-semibold">@Model.Organization.OrgName <span class="text-muted">(@Model.Organization.OrgId)</span></div>
            <div class="text-muted small">
                Â±§Á¥ö @Model.Organization.OrgLevel
                @if (!string.IsNullOrWhiteSpace(Model.Organization.ParentOrgId))
                {
                    <text>| ‰∏äÂ±§ @Model.Organization.ParentOrgId</text>
                }
                @if (Model.Employees.Any())
                {
                    <text>| Âì°Â∑• @Model.Employees.Count ‰Ωç</text>
                }
            </div>
        </div>
    </div>
    @if (hasChildren)
    {
        <ul class="list-unstyled ms-4 mt-2 d-none">
            @foreach (var child in Model.Children)
            {
                @Html.Partial("_OrganizationBrowseNode", child)
            }
            @foreach (var emp in Model.Employees)
            {
                <li class="mb-2 d-flex align-items-start">
                    <span class="me-2">üë§</span>
                    <div>
                        <div class="fw-semibold">@emp.EmployeeNo - @emp.Name</div>
                        <div class="text-muted small">@emp.Title</div>
                    </div>
                </li>
            }
        </ul>
    }
</li>
